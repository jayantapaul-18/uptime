<html>
  <head>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body>
    <h1 x-data="{ message: 'Alpine Dashboard' }" x-text="message"></h1>

    <div x-data="Start()">
      <button @click="showMessage()">Dashboard</button>
      <div>Message: <span x-text="messageDisplay"></span></div>
    </div>

    <script>
      function Start() {
        return {
          message: "Alpine Dashboard!",
          messageDisplay: "",
          showMessage() {
            console.log(this.message);
            this.messageDisplay = this.message;
          },
        };
      }
    </script>
    <div x-data="healthzCheck()">
      <button @click="healthz()">Healthz</button>
      <div>Healthz: <span x-text="healthzz"></span></div>
    </div>

    <script>
      function healthzCheck() {

            this.posts = await (await fetch('http://localhost:3088/app/v1/healthz')).json();


        return {
          message: "Healthz",
          healthzz: "",
          healthz() {
            console.log(this.posts);
            this.healthzz = this.posts;
          },
        };
      }
    </script>

    <div
      x-data="{
        posts: {},

        async retrievePosts() {
            this.posts = await (await fetch('http://localhost:3088/app/v1/healthz')).json();

            // log out all the posts to the console
            console.log(this.posts);
            console.log(this.posts.message);
            this.healthz = this.posts.message;
            
        }
    }"
      x-init="retrievePosts"
    ></div>

    <input
      x-model="person.username"
      class="block w-full px-4 py-3 mb-3 border rounded appearance-none bg-grey-lighter text-grey-darker border-red"
      required
      type="text"
      id="username"
    />
    <input
      x-model="person.password"
      class="block w-full px-4 py-3 mb-3 border rounded appearance-none bg-grey-lighter text-grey-darker border-red"
      required
      type="text"
      id="password"
    />

    <button
      @click="fetch('/app/v1/login', {
    method: 'POST',
    body: JSON.stringify(person)
    })
    .then(response => {
    if (response.ok) alert('login Successfully!')
    else alert(`Something went wrong: ${response.status} - ${response.statusText}`)
    })"
      class="inline-block px-6 py-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-blue-700 rounded shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none"
    >
      Login
    </button>
  </body>
</html>
